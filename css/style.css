/* --- THEME VARIABLES --- */
:root {
    /* Base Colors - Light Mode */
    --color-bg-start: #f0f0f5; 
    --color-bg-end: #e0e0e8; 
    --color-text-main: #343a40; 
    --color-text-secondary: #6c757d;
    --color-shadow: rgba(0, 0, 0, 0.1); 
    
    /* NEW: Define a Red Accent for Light Mode */
    --color-accent: #dc3545; /* Vibrant Red */

    /* --- BOOTSTRAP VARIABLE OVERRIDE FOR LIGHT MODE --- */
    --bs-info: var(--color-accent) !important; 
    --bs-info-rgb: 220, 53, 69 !important; 

    /* Crystal Clear Glassmorphism Properties - LIGHT MODE (ENHANCED 3D) */
    --glass-fill: rgba(255, 255, 255, 0.05); /* MATCHED REQUEST: Very transparent, like water (5% white) */
    --glass-border: rgba(0, 0, 0, 0.1);      /* Subtle dark border for definition */
    --glass-highlight: rgba(255, 255, 255, 0.95); 
    --glass-shadow-outer: rgba(0, 0, 0, 0.15); 
    --glass-shadow-inner-dark: rgba(0, 0, 0, 0.1); 
    --glass-shadow-inner-light: rgba(255, 255, 255, 0.7); 

    /* NEW: PLYR CUSTOMIZATION TO MATCH RED ACCENT */
    --plyr-color-main: var(--color-accent) !important;
}

.dark-mode {
    /* Base Colors - Dark Mode */
    --color-bg-start: #000000;
    --color-bg-end: #000000;
    --color-text-main: #ffffff; 
    --color-text-secondary: #adb5bd;
    --color-shadow: rgba(0, 0, 0, 0.7);
    
    /* Define a Red Accent for Dark Mode */
    --color-accent: #dc3545; /* Vibrant Red */

    /* --- BOOTSTRAP VARIABLE OVERRIDE FOR DARK MODE --- */
    --bs-info: var(--color-accent) !important; 
    --bs-info-rgb: 220, 53, 69 !important; 
    
    /* Crystal Clear Glassmorphism Properties - DARK MODE (ENHANCED 3D) */
    --glass-fill: rgba(255, 255, 255, 0.05); 
    --glass-border: rgba(255, 255, 255, 0.15); 
    --glass-highlight: rgba(255, 255, 255, 0.2); 
    --glass-shadow-outer: rgba(0, 0, 0, 0.9); 
    --glass-shadow-inner-dark: rgba(0, 0, 0, 0.5); 
    --glass-shadow-inner-light: rgba(255, 255, 255, 0.15); 

    /* NEW: PLYR CUSTOMIZATION TO MATCH RED ACCENT */
    --plyr-color-main: var(--color-accent) !important;
}

/* --- BASE STYLES --- */
body {
    /* DEFAULT: Light Mode Gradient Background */
    background: linear-gradient(135deg, var(--color-bg-start) 0%, var(--color-bg-end) 100%); 
    min-height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: var(--color-text-main);
    transition: background 0.5s ease, color 0.5s ease;
}

.dark-mode body {
    /* EXPLICIT: Dark Mode Solid Black Background */
    background: #000000;
}
.section-title {
    color: var(--color-text-main);
}
.text-secondary-light {
    color: var(--color-text-secondary);
}

/* --- INTERACTIVE EFFECTS (Updated to include nav-link) --- */
a, button, .glass-panel, .glass-card-sm, #drop-zone, .navbar-nav .nav-link {
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}
.btn:not(:disabled):hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 20px var(--glass-shadow-outer) !important;
}

/* --- 1. GLASS NAV BAR & ACTIVE TAB HIGHLIGHT --- */
.navbar {
    background-color: var(--glass-fill) !important; 
    backdrop-filter: blur(20px); 
    -webkit-backdrop-filter: blur(20px); 
    box-shadow: 0 2px 10px var(--color-shadow);
}
.navbar-brand {
    /* Ensure the brand text itself follows the main text color */
    color: var(--color-text-main) !important; 
}
/* Ensure Pop is red in navbar */
.navbar-brand .text-info {
    color: var(--color-accent) !important;
}

.navbar-nav .nav-link {
    color: var(--color-text-main) !important;
    position: relative; 
    padding-bottom: 0.5rem; 
}

/* NEW: Hover Animation for Nav Links */
.navbar-nav .nav-link:hover:not(.active) {
    color: var(--color-accent) !important; /* Change color to accent */
    transform: translateY(-2px); /* Subtle lift */
    text-shadow: 0 0 5px rgba(220, 53, 69, 0.5); /* Gentle red glow */
}

/* Active Tab Styles */
.navbar-nav .nav-link.active {
    /* LIGHT MODE: Now Red */
    color: var(--color-accent) !important; 
    font-weight: bold;
    border-bottom: 3px solid var(--color-accent); 
    /* Glow effect using the Red RGB values */
    box-shadow: 0 0 15px rgba(220, 53, 69, 0.8); 
    border-radius: 0;
}

.dark-mode .navbar-nav .nav-link.active {
    /* DARK MODE OVERRIDE (Custom CSS): Red Accent */
    color: var(--color-accent) !important; 
    border-bottom: 3px solid var(--color-accent); 
    box-shadow: 0 0 15px rgba(220, 53, 69, 0.8); /* Red Glow */
}


/* --- 2. HERO SECTION & MAIN GLASS PANEL (ULTRA-REALISTIC 3D) --- */
.hero-backdrop {
    height: calc(100vh - 80px);
    min-height: 550px; 
}
.glass-panel {
    background: var(--glass-fill); 
    backdrop-filter: blur(30px); 
    -webkit-backdrop-filter: blur(30px); 
    border-radius: 20px;
    max-width: 800px;
    width: 90%;
    /* ENHANCED 3D EFFECT */
    box-shadow: 
        0 20px 50px 0 var(--glass-shadow-outer), 
        inset 0 0 0 1px var(--glass-border), 
        inset 5px 5px 15px 0 var(--glass-shadow-inner-dark), 
        inset -5px -5px 15px 0 var(--glass-shadow-inner-light); 
    color: var(--color-text-main);
    padding: 4rem;
}
.glass-panel h1, .glass-panel p {
    color: var(--color-text-main);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); 
}
/* Ensure Pop is red in home panel */
.glass-panel h1 .text-info {
    color: var(--color-accent) !important;
}

/* --- 3. REUSABLE GLASS CARD (Browse Tab) (ULTRA-REALISTIC 3D) --- */
.glass-card-sm {
    background: var(--glass-fill); 
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px); 
    border-radius: 15px;
    /* ENHANCED 3D EFFECT */
    box-shadow: 
        0 10px 20px 0 var(--glass-shadow-outer), 
        inset 0 0 0 1px var(--glass-border), 
        inset 3px 3px 10px 0 var(--glass-shadow-inner-dark), 
        inset -3px -3px 10px 0 var(--glass-shadow-inner-light); 
    color: var(--color-text-main);
    padding: 2rem;
}

/* --- 4. BROWSE TAB: MODERN UPLOAD BLOCK --- */
#drop-zone {
    background: var(--glass-fill);
    border: 3px dashed var(--glass-border);
    border-radius: 12px;
    cursor: pointer;
    text-align: center;
}
#drop-zone.drag-over {
    /* LIGHT MODE: Now Red */
    background: rgba(220, 53, 69, 0.1);
    border-color: var(--color-accent);
    transform: scale(1.02);
}

.dark-mode #drop-zone.drag-over {
    /* DARK MODE OVERRIDE: Red Accent */
    background: rgba(220, 53, 69, 0.1);
    border-color: var(--color-accent);
}

.card-footer-glass {
    background: var(--glass-fill);
    border-top: 1px solid var(--glass-border);
    border-radius: 0 0 15px 15px;
    box-shadow: none; 
}

/* --- Specific Button Overrides for Dark Mode & Light Mode (Accent) --- */
.btn-info, .dark-mode .btn-info {
    --bs-btn-bg: var(--color-accent) !important;
    --bs-btn-border-color: var(--color-accent) !important;
    --bs-btn-hover-bg: #bb2d3b !important; 
    --bs-btn-hover-border-color: #bb2d3b !important;
    --bs-btn-active-bg: #ae2a36 !important; 
    --bs-btn-active-border-color: #ae2a36 !important;
    --bs-btn-color: #ffffff !important; 
    --bs-btn-focus-shadow-rgb: 225,83,97 !important; 
}

.btn-outline-info, .dark-mode .btn-outline-info {
    --bs-btn-color: var(--color-accent) !important;
    --bs-btn-border-color: var(--color-accent) !important;
    --bs-btn-hover-color: #fff !important;
    --bs-btn-hover-bg: var(--color-accent) !important;
    --bs-btn-hover-border-color: var(--color-accent) !important;
    --bs-btn-active-color: #fff !important;
    --bs-btn-active-bg: #dc3545 !important;
    --bs-btn-active-border-color: #dc3545 !important;
    --bs-btn-focus-shadow-rgb: 220,53,69 !important;
}


/* --- SCREEN TAB MODERN/DIM UI --- */
.screen-background {
    background: #000000; 
    min-height: calc(100vh - 80px); 
    padding: 0; 
    display: flex;
    flex-direction: column;
    justify-content: center; 
    align-items: center; 
    position: relative; 
    overflow: hidden; 
}

/* Fullscreen Styles: Apply when the wrapper is in fullscreen */
#media-player-wrapper:fullscreen, 
#media-player-wrapper:-webkit-full-screen {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    background: black;
    margin: 0;
    padding: 0;
}

/* Header for title and close button */
.screen-header {
    position: absolute;
    top: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center; 
    align-items: center;
    padding: 0 30px;
    z-index: 1000; 
    color: white;
    text-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
    pointer-events: none; 
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}

/* Ensure header is visible when video is fullscreened (by our double-click logic) */
#media-player-wrapper:fullscreen ~ .screen-header,
#media-player-wrapper:-webkit-full-screen ~ .screen-header,
.screen-background:hover .screen-header {
    opacity: 1; 
}

.screen-header .screen-title {
    position: absolute; 
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 0;
    /* CHANGE 1: Make font smaller */
    font-size: 1rem; /* Reduced from 1.25rem */
    font-weight: normal;
    text-align: center;
    max-width: 60%; 
    pointer-events: auto; 
    
    /* CHANGE 2: Add single-line overflow/scrolling properties */
    white-space: nowrap; /* Keep content on a single line */
    overflow: hidden; /* Hide the content that overflows its container */
}

/* NEW: Keyframes for the scrolling text animation */
@keyframes scrollText {
    0% { transform: translateX(100%); } /* Start off-screen right */
    100% { transform: translateX(-100%); } /* End off-screen left */
}

/* NEW: Style for the scrolling title */
.screen-header .screen-title.scrolling {
    /* Set the text size based on the parent's width */
    max-width: 60%; /* Keep the defined width limit */
}

/* NEW: Inner span to hold the text and apply the animation */
.screen-header .screen-title.scrolling span {
    display: inline-block; /* Essential for the animation */
    /* CHANGE 3: Slower speed and reduced reappearance time (25s) */
    animation: scrollText 25s linear infinite;
    /* CHANGE 4: Reduce initial distance/gap (now 10vw instead of 100%) */
    padding-left: 10vw; /* Start the text just off the screen to the right with a small gap */
}

/* Style for the 'X' close button */
.screen-header .btn {
    position: absolute; 
    right: 30px; 
    top: 0; 
    pointer-events: auto; 
    background: none; 
    border: none; 
    color: white; 
    font-size: 1.5rem; 
    padding: 0; 
    width: 40px; 
    height: 40px; 
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%; 
    transition: background-color 0.2s ease;
    box-shadow: none !important; 
}

.screen-header .btn:hover {
    background-color: rgba(255, 255, 255, 0.1); 
    transform: none; 
}


/* Wrapper to control media player size */
#media-player-wrapper {
    width: 80vw;
    height: 80vh;
    max-width: 1200px; 
    max-height: 80vh; 
    aspect-ratio: 16 / 9; 
    position: relative;
    display: flex; 
    justify-content: center;
    align-items: center;
}

#media-player-container {
    background-color: #000000; 
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 15px; 
    overflow: hidden; 
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.9); 
}

#media-player-container h3 {
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
}

/* Ensure Plyr element takes the full size of its container */
#media-player-container .plyr {
    height: 100%;
    width: 100%;
}

/* MODIFIED: PLYR CUSTOMIZATION */

/* Make control bar background completely transparent */
.plyr__controls {
    background: none !important; /* Completely removes the background */
    backdrop-filter: none; /* Removes the blur/glass effect */
    -webkit-backdrop-filter: none;
    border-radius: 0; /* Remove border radius since background is gone */
    /* Keep the reduced vertical padding for a tighter control strip */
    padding: 8px 20px !important; 
}

/* Ensure progress bar color is correctly set by the main variable */
.plyr--full-ui input[type=range] {
    color: var(--color-accent); 
}

/* --- TOAST FIX: Floating Slide-in Animation --- */

/* Keyframes for the continuous floating motion */
@keyframes floatAnimation {
    0% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-5px) translateX(0); }
    100% { transform: translateY(0) translateX(0); }
}

/* Keyframes for the initial slide-in from the right */
@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.toast {
    opacity: 0;
    transform: translateX(100%);
    transition: none; 
}

.toast.show {
    animation: slideInRight 0.5s ease-out forwards, 
               floatAnimation 2s ease-in-out 0.5s infinite alternate; 
}

/* --- NEW: THEME TOGGLE SWITCH ACCENT COLOR --- */
.form-check-input:checked {
    /* Set the background and border to the defined red accent */
    background-color: var(--color-accent) !important;
    border-color: var(--color-accent) !important;
}

/* Ensure the focus shadow is also the red accent */
.form-check-input:focus {
    box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25); /* Using the accent RGB (220, 53, 69) with transparency */
}

/* --- NEW: GLASS TOAST STYLES (Slimmer) --- */
.toast.toast-glass {
    background: var(--glass-fill); 
    backdrop-filter: blur(15px); 
    -webkit-backdrop-filter: blur(15px); 
    border-radius: 12px;
    border: 1px solid var(--glass-border);
    /* SLIMMER: Fixed narrow width */
    max-width: 350px !important; 
    box-shadow: 0 5px 15px var(--glass-shadow-outer);
    color: var(--color-text-main); /* Ensure text color changes with theme */
    padding: 0; /* Remove default padding */
    border-left: 6px solid var(--color-accent); /* Accent bar for style */
}

/* Custom coloring for the status icon/text to use accent red */
.toast.toast-glass .text-success-accent {
    color: var(--color-accent) !important; /* Red accent for success/file selected */
}
.toast.toast-glass .text-warning-accent {
    color: #ffc107 !important; /* Standard yellow for warning */
}

/* --- NEW: TOAST WORD WRAP FIX --- */
#toastFileName, #warningToastBody {
    color: var(--color-text-secondary); 
    font-size: 0.85rem;
    /* Properties to enable word wrap for long file names/messages */
    overflow-wrap: break-word; 
    word-break: break-all;
    /* Important for flex containers to allow content to wrap */
    min-width: 0; 
}

/* Light Mode Override for Toast Text (Accent Red) */
body:not(.dark-mode) #toastFileName, 
body:not(.dark-mode) #warningToastBody {
    color: var(--color-accent) !important;
    /* text-shadow: 0 0 3px rgba(255, 255, 255, 0.7); REMOVED */
}


/* Adjust the close button */
.toast .btn-close {
    opacity: 0.6;
    /* Filter applied for Dark Mode visibility */
    filter: invert(1) grayscale(1) brightness(2); 
    transition: opacity 0.2s ease;
}
.toast .btn-close:hover {
    opacity: 1;
}

/* Light Mode Override for Close Button (Accent Red SVG) */
body:not(.dark-mode) .toast .btn-close {
    filter: none; /* Remove white filter in light mode */
    /* Set SVG to the accent red color (#dc3545) */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23dc3545'%3e%3cpath d='M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z'/%3e%3c/svg%3e");
}

/* Dark mode close button override */
.dark-mode .toast .btn-close {
    /* Ensures the filter is reapplied for dark mode */
    filter: invert(1) grayscale(1) brightness(2); 
}